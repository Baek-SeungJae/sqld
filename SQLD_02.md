# SQLD

## 2. 데이터 모델과 성능

## 1. 성능 데이터 모델링의 개요

### 1. 성능 데이터 모델링

> - DB 성능 향상을 위한 사항이 데이터 모델링에 반영되도록 하는 것

### 2. 수행 시점

> - 분석/설계 단계, 성능 데이터 모델링 시점이 늦어질수록 재업무 비용이 증가함

### 3. 고려 사항

> - 분석/설계 단계, 성능 데이터 모델링 시점이 늦어질수록 재업무 비용이 증가함

## 2. 정규화와 성능

### 1. 정규화

> - 데이터 분해 과정, 이상현상(anomaly) 제거
> - 정규형(NF) : 정규화로 도출된 데이터 모델이 갖춰야 할 특성

### 2. 함수적 종속성

> - 결정자와 종속자의 관계, 결정자의 값으로 종속자의 값을 알 수 있음
> - 다치 종속(MVD; Multivalued Dependency): 여러 칼럼이 동일한 결정자의 종속자일 때

### 3. 정규화 이론

> - 다치 종속(MVD; Multivalued Dependency): 여러 칼럼이 동일한 결정자의 종속자일 때
> - 4차 정규화는 다치 종속을 제거
> - 5차 정규화는 조인에 의한 이상현상을 제거하여 정규화를 수행함
>   - 원자성 확보
>   - 부분함수종속성제거
>   - 이행함수종속성제거
>   - 결정자 함수 종속성 제거
>   - 다치종속성제거
>   - 조인에 의한 이상현상 제거

### 4. 정규화와 성능

> - 정규화로 인한 성능 향상: 입력/수정/삭제 시 성능은 항상 향상됨
>   - 정규화로 인한 성능 향상: 입력/수정/삭제 시 성능은 항상 향상됨
>   - 재활용 가능성 증가: 개념이 세분화됨
>   - 데이터 중복 최소화
> - 정규화로 인한 성능 저하: 조회 시 처리 조건에 따라 성능 저하가 발생할 수도 있음
>   - 데이터 조회 시 조인을 유발하여 CPU와 메모리를 많이 사용하게 됨
>     - 반정규화로 해결 가능
>     - 조인이 발생하더라도 인덱스를 사용하여 조인 연산을 수행하면 성능 상 단점이 거의 없고, 정규화를 통해 필요한 인덱스의 수를 줄일 수 있음
>     - 정규화를 통해 소량의 테이블이 생성된다면 성능 상 유리할 수 있음

## 3. 반정규화와 성능

### 1. 반 정규화

> - 데이터 중복을 허용하여 조인을 줄이는 DB 성능 향상 방법, 데이터의 무결성을 희생하고 조회 성능 향상

### 2. 절차

> - 반정규화 대상 조사: 데이터 처리 범위 및 통계성 등 조사
> - 다른 방법 검토: 1) 뷰 2) 클러스터링 3) 인덱스 4) 애플리케이션
> - 반정규화 적용: 정규화 수행 후 반정규화 수행

### 3. 기법

> - 테이블 반정규화
>   - 테이블 병합
>     - 1:1 관계 테이블 병합
>     - 1:N 관계 테이블 병합: 많은 데이터 중복 발생
>     - 1:N 관계 테이블 병합: 많은 데이터 중복 발생
>   - 테이블 분할
>     - 수직분할
>     - 수평분할
>   - 테이블 추가
>     - 중복 테이블: 업무나 서버가 다를 때 중복 테이블 생성 (원격조인 제거)
>     - 통계 테이블
>     - 이력 테이블
>     - 부분 테이블 : 업무나 서버가 다를 때 중복 테이블 생성 (원격조인 제거)
>   - 칼럼 반 정규화
>     - 중복 칼럼 추가
>     - 파생 칼럼 추가: 필요한 값 미리 계산한 칼럼 추가
>     - 이력 테이블 칼럼 추가
>     - PK에 의한 칼럼 추가: PK의 종속자를 일반속성으로 생성
>     -  응용 시스템의 오작동을 위한 칼럼 추가
>   - 관계 반정규화: 데이터 무결성 보장 가능
>     - 중복 관계 추가

