# SQLD

## 1. 데이터 모델링의 이해

### 1. 모델링 특징

> - 추상화 : 현실세계, 다양한 현상 일정한 양식인 표기법에 의해 표현 (=모형화, 가설적)
> - 단순화 : 복잡한 현실세계를 약속된 규약에 의해 제한된 표기법이나 언어로 표현
> - 명확화 : 누구나 이해하기 쉽게 대상에 대한 애매모호함 제거

### 2. 모델링의 세 가지 관점

> - 데이터 관점 : 업무가 어떤 데이터와 관련이 있는지, 데이터간 관계가 무엇인지(What, Data)
> - 프로세스 관점 : 업무가 실제하고 있는 일이 무엇인지, 무엇을 해야하는지 (How, Process)
> - 상관 관점 : 업무를 처리하는 방법에 따라 데이터가 어떻게 영향받고 있는지(Interaction)

### 3. 데이터 모델링 정의

> - 정보시스템 구축을 위한 데이터 관점의 업무 분석기법
> - 현실세계 데이터에 대해 약속된 표기법에 의해 표현하는 과정
> - 데이터베이스를 구축하기 위한 분석, 설계과정

### 4. 데이터 모델링 기능

> - 명세화
> - 구조화
> - 문서화
> - 다양한 관점
> - 상세수준 표현

### 5. 데이터 모델링의 유의점

> - 중복
> - 비유연성
> - 비일관성

### 6. 데이터 모델링의 중요성

> - 파급효과가 크다 (Leverage)
> - 복잡한 정보 요구사항의 간결한 표현 (Conciseness)
> - 데이터 품질을 유지 (Data Quality)
>   - 유일성 : 데이터 중복 저장 방지
>   - 유연성 : 데이터의 정의와 데이터 사용 프로세스 분리
>   - 일관성

### 7. 데이터 모델링의 3단계 진행

> - 계획 분석 설계 개발 테스트 전환/이행 
> - (추상적)개념적 -> 논리적 -> (구체적)물리적
> - 개념적 데이터 모델링(in 계획분석단계) : 추상화, 업무중심적, 포괄적, 전사적, EA수립시 사용
> - 논리적 데이터 모델링(in 분석단계) : KET, 속성, 관계표현, 재사용성 높임(정규화)
> - 물리적 데이터 모델링(in 설계단계) : 실제 데이터베이스를 이식할 수 있도록 성능, 저장 등 물리적 성격 고려

### 8. 데이터 독립성 필요 이유

> - 이해관계자
>   - 개발자, DBA, 모델러, 현업업무전문가 => 완성된 모델을 정확히 해석할 수 있어야 함
> - 유지보수 비용증가, 데이터 중복성, 복잡성 증가, 요구사항 대응 저하

### 9. ANSI / SPARC 3단계 구조

> - 논리적 독립성(외부단계 - 개념적단계) : 개념적스키마 변경, 외부스키마 영향 없음, 논리적 구조 변경되어도 응용프로그램 영향 없음
> - 물리적 독립성(개념적단계 - 내부적단계) : 내부스키마 변경, 외부/개념스키마 영향 없음, 저장장치의 구조변경은 응용프로그램과 개념스키마에 영향없음

### 10. 3층 스키마

> - 외부 스키마: 각 사용자 단계의 개인적 DB 스키마, 사용자 관점, 응용 프로그램이 접근하는 DB를 정의함
>
> - 개념 스키마: 조직 전체의 통합된 DB 스키마, 설계자 관점 *데이터 모델링의 지향점*
>
> - 내부 스키마: 물리적으로 데이터가 저장되는 방법을 표현하는 스키마, 개발자 관점, 물리적 저장 구조임

### 11. 좋은 데이터 모델의 요소

> - 완전성, 중복배제, 업무규칙, 데이터 재사용, 의사소통, 통합성

### 12. 데이터 모델링 세가지 요소

> - 엔터티(Thing), 속성(Attributes), 관계(Relationships)

## 2. 엔터티

### 1. 개념

> - 명사에 해당, 저장되기 위한 어떤 것(Thing)
> - 반드시 해당 업무에서 필요하고 관리하고자 하는 정보이어야 한다.(ex, 환자, 토익 응시 횟수)
> - 유일한 식별자에 의해 식별 가능해야 함.
> - 영속적으로 존재하는 인스턴스의 집합이어야 한다. ('한 개' 가 아니라 '두 개 이상')
> - 업무 프로세스에 의해 이용 되어야 한다.
> - 반드시 두 개이상의 속성이 있어야 함. (식별자만 있으면 의미없음)
> - 다른 엔터티와 최소 한 개 이상의 관계가 있어야 함.

### 2. 종류

> - 유무형에 따르분류
>   - 유형 : 물리적인 형태, 안정적 (사원, 물품, 강사)
>   - 개념 : 물리적 형태, 존재하지 않고 관리해야 할 개념적 정보 (조직, 보험상품)
>   - 사건 : 업무 수행함에 따라 발생됨 (주문, 청구, 미납)
> - 발생시점 (기본 -> 중심 -> 행위)에 따른 분류
>   - 기본 : 원래 존재하는 정보, 독립적으로 생성 가능 (사원, 부서, 고객)
>   - 중심 : 기본 엔터티로부터 발생되고 업무에 있어서 중심적인 역할(계약, 접수)
>   - 행위 : 두 개 이상의 부모엔터티로부터 발생되고 자주 내용이 바뀌거나 데이터의 양 증가 (주문내역, 계약진행)

### 3. 명명법

> - 가능하면 현업업무에서 사용하는 용어를 사용한다.
>
> - 가능하면 약어를 사용하지 않는다.
>
> - 단수 명사를 사용한다.
>
> - 모든 엔터티를 통틀어서 유일한 이름을 가져야 한다.
>
> - 엔터티의 생성의미대로 이름을 부여한다.

## 3. 속성

### 1. 개념

> - 엔터티가 가지는 최소 의미의 단위, 인스턴스의 구성 요소
> - 엔터티와 인스턴스 및 속성과 속성값 간의 관계
> - 업무에서 필요한 정보
> - 주 식별자에 함수적인 종속성
> - 한 개의 속성값만 가짐, 다중값일 경우 별도의 엔터티를 이용하여 분리 필요

### 2. 인스턴스 - 속성- 엔터티의 관계

> - 엔터티는 인스턴스를 2개이상 가진다
> - 엔터티는 두 개 이상의 속성을 가진다. (식별자 외에 1개 이상)
> - 한 개의 속성은 한 개의 속성값을 가진다.

### 3. 종류

> - 특성에 따른 분류
>   - 기본 : 업무로부터 추출한 값 (이름, 전화번호, 성별)
>   - 설계 : 규칙화를 위해 변형/새로정의한 값 (과목코드, 지역코드)
>   - 파생 : 다른 속성에 영향을 받아 발생한 값 (예금이자, 평균성적)
> - 엔터티 구성방식에 따른 분류
>   - PK : 엔터티를 식별할 수 있는 속성
>   - FK : 다른 엔터티와의 관계에 포함된 속성
>   - 일반속성 : PK, FK에 포함되지 않은 속성
> - 분해 가능 여부에 따른 분류
>   - 단일속성 : 하나의 의미
>   - 복합속성 : 여러 의미, 단일 속성으로 분해 가능
>   - 단일 값 속성 : 하나의 값
>   - 다중 값 속성 : 여러 값, 엔터티로 분해 가능

### 4. 도메인

> - 속성이 가질 수 있는 값의 범위

## 4. 관계

### 1. 개념

> - 인스턴스 사이의 논리적인 연관성

### 2. 관계의 페어링

> - 엔터티 안에 인스턴스가 개별적으로 관계를 가지는 것
> - 페어링의 집합 -> 관계

### 3. 관계 표기법

> - 관계명(Membership) : 관계의 이름
> - 관계차수(Cardinality) : 1:1, 1:M, M:N
> - 관계선택사양(Optionality) : 필수관계(not null), 선택관계(nullable, O를표시)

### 4. 관계의 종류

> - ERD 기준 : 표기 구분 안함
>   - 존재 관계 : 엔터티 간의 상태
>   - 행위 관계 : 엔터티 간에 발생하는 행위
>
> - UML 기준
>   - 연관 관계 : 실선
>   - 의존 관계 : 점선
> - 식별자에 따른 분류
>   - 식별 관계 : 부모 엔터티의 식별자를 자식 엔터티에서 주식별자로 사용
>     - 부모 엔터티의 식별자를 자식 엔터티에서 일반 컬럼으로 참조 사용, 약한 종속 관계
>   - 비식별 관계 : 부모 엔터티의 식별자를 자식 엔터티에서 일반 컬럼으로 참조 사용, 약한 종속 관계
>     - 식별 관계만으로 연결되면 주식별자 수가 많아질 수밖에 없으므로 1) 관계 강약 분석 2) 자식 엔터티의 독립 PK 필요성 3) SQL 복잡성과 개발 생산성 고려 필요

### 5. 관계 읽기

> - 각각의/하나의 > 기준 엔터티 > 관계차수 > 대상 엔터티 > 관계선택사양 > 관계명

## 5. 식별자

### 1. 개념

> - 각각의/하나의 > 기준 엔터티 > 관계차수 > 대상 엔터티 > 관계선택사양 > 관계명
>
> - 유일성
> - 최소성
> - 불변성
> - 존재성

### 2. 종류

> - 대표성에 따른 분류
>   - 주 식별자 : 대표성을 만족하는 식별자
>   - 보조 식별자 : 유일성과 최소성만 만족하는 식별자, 참조 관계 연결에 사용할 수 없음
>   - 키의 종류
>     - 기본키 : 엔터티를 대표하는 키, 후보키 중 선정됨
>     - 후보키 : 유일성과 최소성을 만족하는 키
>     - 슈퍼키 : 유일성만 만족하는 키
>     - 대체키 : 기본키를 제외한 나머지 후보키
>     - 외래키 : 여러 테이블의 기본 키 필드, 참조 무결성(Referential Integrity)을 확인하기 위해 사용됨 (허용된 데이터 값만 저장하기 위함)
> - 생성 여부에 따르분류
>   - 내부 식별자: 자연스럽게 존재하는 식별자 (~ 본질식별자)
>   - 내부 식별자: 자연스럽게 존재하는 식별자 (~ 본질식별자)
> - 속성 수에 따른 분류
>   - 단일 식별자: 하나의 속성
>   - 복합 식별자: 여러 속성
> - 대체 여부에 따른 분류
>   - 본질 식별자: 대체될 수 없는 식별자
>   - 인조 식별자: 인위적으로 만들어지는 대체가능한 식별자 (순서번호(Sequence Number)를 사용하여 생성된 식별자), 1) 후보 식별자 중 주식별자로 선정할 것이 없거나 2) 주식별자가 너무 많은 칼럼으로 구성되어 있을 때 사용

### 3. 주 식별자 도출 기준

> - 업무에서 자주 이용되는 속성, 이름 명명 지양, 복합 식별자 지양

